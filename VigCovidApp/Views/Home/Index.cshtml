@model IEnumerable<VigCovidApp.ViewModels.ListaTrabajadoresViewModel>

style{
}

<link href="~/Content/jquery-ui.css" rel="stylesheet" />
<div id="page-head">

    <div class="pad-all text-center">
        <h3>SISTEMA DE VIGILANCIA COVID-19</h3>

        <div class="row">
            <select id="ddlEmpresaCodigo" multiple tabindex="4" data-width="50%">
                @for (int i = 0; i < ViewBag.EMPRESASASIGANADAS.Count; i++)
                {
                    if (i == 0)
                    {
                        <option value="@ViewBag.EMPRESASASIGANADAS[i].EmpresaIdSedeId" selected>@ViewBag.EMPRESASASIGANADAS[i].EmpresaSede<!--.Split('-')[1]--></option>
                    }
                    else
                    {
                        <option value="@ViewBag.EMPRESASASIGANADAS[i].EmpresaIdSedeId">@ViewBag.EMPRESASASIGANADAS[i].EmpresaSede<!--.Split('-')[1]--></option>
                    }
                }
            </select>
        </div>
    </div>
</div>

<!--Page content-->
<!--===================================================-->
<div id="page-content">

    <div class="row">
        <div class="col-sm-4">
            <div id="demo-panel-network" class="panel">
                <div id="Chart-Diarios"></div>
            </div>
        </div>
        <div class="col-sm-4">
            <div id="demo-panel-network" class="panel">
                <div id="Chart-Altas"></div>
            </div>
        </div>
        <div class="col-sm-4">
            <div id="demo-panel-network" class="panel">
                <div id="chart-sedes"></div>
                <div class="form-group">
                    <select class="selectpicker" id="ddlMes">
                        <option value="MARZO">MARZO</option>
                        <option value="ABRIL">ABRIL</option>
                        <option value="MAYO">MAYO</option>
                        <option value="JUNIO">JUNIO</option>
                        <option value="JULIO">JULIO</option>
                        <option value="AGOSTO">AGOSTO</option>
                        <option value="SETIEMBRE" selected>SETIEMBRE</option>
                        <option value="OCTUBRE">OCTUBRE</option>
                        <option value="NOVIEMBRE">NOVIEMBRE</option>
                        <option value="DICIEMBRE">DICIEMBRE</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    @*<div class="row">*@
    <div class="row">
        <div class="col-sm-8">
            <div class="panel botonera">
                <div class="panel-body text-center clearfix">
                    <div class="col-sm-3 pad-top">
                        <div class="text-lg">
                            <p>
                                <button class="btn btn-default text-2x text-thin text-main" name="btnSeguimientoTotales">
                                    @ViewBag.INDICADORES.Data.SeguimientoTotales
                                </button>
                            </p>
                        </div>
                        <p class="text-sm text-bold text-uppercase">Trabajadores en Seguimiento</p>
                    </div>
                    <div class="col-sm-3 pad-top">
                        <div class="text-lg">
                            <p class="cursor-pointer ">
                                <button class="btn btn-default btn-programadas-hoy text-2x text-thin text-main" name="btnProgramadosHoy">
                                    @ViewBag.INDICADORES.Data.ProgramadosHoy
                                </button>
                            </p>
                        </div>
                        <p class="text-sm text-bold text-uppercase">Seguimientos pendientes de hoy</p>
                    </div>
                    <div class="col-sm-6">
                        <ul class="list-unstyled text-center pad-top mar-btm row ">
                            <li class="col-xs-4 cursor-pointer">
                                <button class="btn btn-default btn-icon btn-circle " name="btnAltasPendientes">@ViewBag.INDICADORES.Data.AltasHoy</button>
                                <p class="text-sm text-muted mar-no">Altas Pendientes por completar (HOY)</p>
                            </li>
                            <li class="col-xs-4">
                                <button class="btn btn-default btn-icon btn-circle " name="btnHospitalizados">@ViewBag.INDICADORES.Data.Hospitalizados</button>
                                <p class="text-sm text-muted mar-no">Hospitalizados HOY DÍA</p>
                            </li>
                            <li class="col-xs-4">
                                <button class="btn btn-default btn-icon btn-circle " name="btnAltasDadas">@ViewBag.INDICADORES.Data.AltasDadas</button>
                                <p class="text-sm text-muted mar-no">Altas Dadas</p>
                            </li>
                        </ul>
                        <ul class="list-unstyled text-center bord-top pad-top mar-no row">
                            <li class="col-xs-4">
                                <button class="btn btn-default btn-icon btn-circle " name="btnModeradosCriticos">@ViewBag.INDICADORES.Data.ModeradosCriticos</button>
                                <p class="text-sm text-muted mar-no">Moderados/Severo HOY DÍA</p>
                            </li>
                            <li class="col-xs-4">
                                <button class="btn btn-default btn-icon btn-circle " name="btnCuarentena">@ViewBag.INDICADORES.Data.Cuarentena</button>
                                <p class="text-sm text-muted mar-no">Cuarentena (Contacto Directo)</p>
                            </li>
                            <li class="col-xs-4">
                                <button class="btn btn-default btn-icon btn-circle" name="btnFallecidos">@ViewBag.INDICADORES.Data.Fallecidos</button>
                                <p class="text-sm text-muted mar-no">Fallecidos</p>
                            </li>



                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!--<div class="col-sm-2">-->
        <!--Sparkline Area Chart-->
        <!--<div class="panel panel-success panel-colorful">
                <div class="pad-all">
                    <p class="text-lg text-semibold"><i class="demo-pli-data-storage icon-fw"></i> Positivos</p>
                    <p class="mar-no">
                        <span class="pull-right text-bold" id="info-TotalIgM">@ViewBag.INDICADORES.Data.TotalIgM</span> IgM
                    </p>
                    <p class="mar-no">
                        <span class="pull-right text-bold" id="info-TotalIgG">@ViewBag.INDICADORES.Data.TotalIgG</span> IgG
                    </p>
                    <p class="mar-no">
                        <span class="pull-right text-bold" id="info-TotalIgMeIgG">@ViewBag.INDICADORES.Data.TotalIgG_IgM</span> IgM e IgG
                    </p>
                </div>
                <div class="pad-top text-center">
                    <div id="demo-sparkline-area" class="sparklines-full-content"></div>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="panel panel-info panel-colorful cursor-pointer" data-toggle="modal" data-target="#modal-info-altas">
                <div class="pad-all">
                    <p class="text-lg text-semibold">Alta</p>
                    <p class="mar-no">
                        <span class="pull-right text-bold" id="info-AltasHoy"></span> Hoy
                    </p>
                    <p class="mar-no">
                        <span class="pull-right text-bold" id="info-AltasTotal"></span> Total
                    </p>
                </div>
                <div class="pad-top text-center">-->
        <!--Placeholder-->
        <!--<div id="demo-sparkline-line" class="sparklines-full-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>-->

        <div class="row">
            <div class="col-xs-12">
                <div class="panel">
                    <div class="panel-heading">
                        @*<h3 class="panel-title">Lista de trabajadores</h3>*@
                    </div>

                    <div class="panel-body">
                        <div class="pad-btm form-inline">
                            <div class="row">
                                <div class="col-sm-6 table-toolbar-left">
                                    <button class="btn btn-primary" data-toggle="modal" data-target="#modal-registrar-trabajador"><i class="demo-pli-add icon-fw"></i>Agregar nuevo trabajador</button>

                                    <button class="btn btn-default" id="btnModalRangodeFechas" data-toggle="modal" data-target="#modal-rangodefechas"><i class="demo-pli-printer icon-lg"></i>Descargar Excel Acumulado</button>
                                    @*<button class="btn btn-default" id="btnReporteManual"><i class="demo-pli-printer icon-lg"></i>Descargar Excel acumulado</button>*@
                                    <button class="btn btn-default" id="btnReporteAltaMedicaHoy"><i class="demo-pli-printer icon-lg"></i>Descargar Altas de Hoy</button>


                                    @*<button class="btn btn-default" id="btnIncluirAltas"><i class="demo-pli-checked-user icon-lg"></i>Incluir Altas</button>*@
                                </div>
                                <div class="col-sm-6 table-toolbar-right">
                                    <div class="form-group">
                                        <input type="text" autocomplete="off" class="form-control" placeholder="Ingrese nombres o dni" id="input-search">
                                        <div class="input-group-append">
                                            <button class="btn btn-success" type="button" id="button-search">Buscar</button>
                                        </div>
                                    </div>
                                </div>
                               
                            @*</div>---*@
                        </div>
                        @**@
                        @*class="table table-bordered table-hover toggle-circle"*@
                        @*<table id="table-Lista-Trabajadores" class="table table-striped" data-page-length='50' data-order='[[ 1, "asc" ]]'>*@

                            

                        @*<table id="" data-page-size="1000" class="table table-striped">*@
                    <table id="table-Lista-Trabajadores" data-page-size="1000" class="display">
                        @*class="table table-sm table-striped table-hover table-bordered">*@
                        @*data-order='[[ 1, "asc" ]]'*@


                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Trabajador</th>
                                @*//<th data-toggle="true">Trabajador</th>*@
                                <th>DNI</th>
                                <th>Empresa Empleadora</th>
                                <th>Sede</th>
                                <th>Edad</th>
                                <th>Fecha INGRESO</th>
                                <th>Fecha ALTA</th>
                                <th>Modo de ingreso</th>
                                <th>Estado Actual</th>
                                <th>Médico Asignado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var trabajador in Model)
                            {
                                if (trabajador.RegistroTrabajadorId == 107)
                                {

                                }
                                <tr>
                                    @*SI ES PROPIETARIO PUEDE MODIFICAR*@
                                    <td>@trabajador.Indice</td>
                                    @if (trabajador.Propietario)
                                    {
                                        <td><a href="/MonitoringWorker/RegisterMonitoring?id=@trabajador.RegistroTrabajadorId" class="btn-link">@Html.DisplayFor(modelItem => trabajador.NombreCompleto) </a></td>
                                    }
                                    else
                                    {
                                        if (trabajador.PermisoLectura && !trabajador.Propietario)
                                        {
                                            <td><a href="/MonitoringWorker/RegisterMonitoring?id=@trabajador.RegistroTrabajadorId" class="btn-link">@Html.DisplayFor(modelItem => trabajador.NombreCompleto) </a></td>
                                        }
                                        else
                                        {
                                            <td>@Html.DisplayFor(modelItem => trabajador.NombreCompleto)</td>
                                        }
                                    }

                                    <td>@Html.DisplayFor(modelItem => trabajador.Dni)</td>
                                    <td>@Html.DisplayFor(modelItem => trabajador.EmpresaEmpleadora)</td>
                                    <td>@Html.DisplayFor(modelItem => trabajador.Sede)</td>
                                    <td><span class="text-muted">@Html.DisplayFor(modelItem => trabajador.Edad)</span></td>
                                    <td>@Html.DisplayFor(modelItem => trabajador.FechaIngreso)</td>
                                    <td>@Html.DisplayFor(modelItem => trabajador.FechaAlta)</td>
                                    <td class="text-center text-uppercase">
                                        @Html.DisplayFor(modelItem => trabajador.ModoIngreso)
                                    </td>
                                    <td class="text-center">@Html.DisplayFor(modelItem => trabajador.EstadoDiario)</td>
                                    <td class="text-center">@Html.DisplayFor(modelItem => trabajador.MedicoVigila)</td>
                                    <td class="text-center">
                                        @*<div id="btn-editar-@trabajador.RegistroTrabajadorId" class="label label-table label-success cursor-pointer" data-toggle="modal" data-target="#modal-editar-trabajador">Editar registro</div>
                        <div id="btn-eliminar-@trabajador.RegistroTrabajadorId" class="label label-table label-danger cursor-pointer btn-elimnar-registro">Eliminar</div>*@

                                        @*Modificado por Saul Ramos V - 13072021*@
                                        <div id="btn-editar-@trabajador.RegistroTrabajadorId" data-toggle="modal" data-target="#modal-editar-trabajador" class="label cursor-pointer"><img src="~/img/editarREGISTROS.png" title="EDITAR" width="22" height="20" /></div>
                                        <div id="btn-eliminar-@trabajador.RegistroTrabajadorId" class="label cursor-pointer btn-elimnar-registro"><img src="~/img/eliminarREGISTRO.png" title="ELIMINAR" width="22" height="20" /></div>



                                    </td>
                                    <td class="text-center">
                                    </td>
                                </tr>
                            }
                        </tbody>

             
                        @*<tfoot>
            <tr>
                <td colspan="12" class="footable-visible">
                    <div class="text-right">
                        <ul class="pagination">
                            <li class="footable-page-arrow">
                                <a data-page="first" href="#first">«</a>
                            </li>
                            <li class="footable-page-arrow">
                                <a data-page="prev" href="#">‹</a>
                            </li>
                            <li class="footable-page">
                                <a data-page="0" href="#">1</a>
                            </li>
                            <li class="footable-page active">
                                <a data-page="1" href="#">2</a>
                            </li>
                            <li class="footable-page-arrow disabled">
                                <a data-page="next" href="#next">›</a>
                            </li>
                            <li class="footable-page-arrow disabled">
                                <a data-page="last" href="#last">»</a>
                            </li>
                        </ul>
                    </div>
                </td>
            </tr>
        </tfoot>*@
                    </table>
                   </div>
                </div>
            </div>
        </div>
    </div>

    <!--===================================================-->
    <!--End page content-->
    <!--Modal Registro de trabajador-->
    <!--===================================================-->
    <div class="modal fade"
         id="modal-registrar-trabajador"
         role="dialog"
         tabindex="-1"
         aria-labelledby="modal-registrar-trabajador"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--Modal header-->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="pci-cross pci-circle"></i>
                    </button>
                    <h4 class="modal-title">Registro de trabajador</h4>
                </div>

                <!--Modal body-->
                <div class="modal-body">
                    <!--Block Styled Form -->
                    <!--===================================================-->
                    <div class="panel panel-bordered panel-warning panel-buscardor-trabajador">
                        @*<div class="panel-heading">
                                <h3 class="panel-title">Buscar trabajador</h3>
                            </div>*@
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">Nro. Documento / Nombres / Apellidos</label>
                                        <input type="text" class="form-control" id="txt-buscar-trabajador-hc" name="buscar-trabajador-hc">
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group mar-top">
                                        <button class="btn btn-info" id="btn-registro-manual">Registro Manual</button>
                                    </div>
                                </div>
                            </div>
                            <div class="row" id="msg-registro">
                            </div>
                        </div>
                    </div>
                    <div id="panel-registro-trabajador" class="disable">

                        <div class="panel panel-bordered-primary">
                            <div class="panel-heading">
                                <h3 class="panel-title">Registro Trabajador</h3>
                            </div>
                            <div class="panel-body">
                                <form id="form-registrar-trabajador">
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">DNI</label>
                                                    <input type="text" class="form-control" id="txtDni" name="validateDni" autocomplete="off">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Nombre Completo</label>
                                                    <input type="text" class="form-control" id="txtNombreCompleto" name="validateNombreCompleto">
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Apellido Paterno</label>
                                                    <input type="text" class="form-control" id="txtApePaterno" name="validateApePaterno">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">Apellido Materno</label>
                                                    <input type="text" class="form-control" id="txtApeMaterno" name="validateApeMaterno">
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">Celular</label>
                                                    <input type="text" class="form-control" id="txtCelular" name="validateCelular">
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">TELF. EMERGENCIA</label>
                                                    <input type="text" class="form-control" id="txtTelfReferencia" name="validateTelfReferencia">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">Sexo</label>
                                                    <select class="selectpicker" id="ddlSexo" data-width="90%">
                                                        <option value="MASCULINO">MASCULINO</option>
                                                        <option value="FEMENINO">FEMENINO</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">Edad</label>
                                                    <input type="text" class="form-control" id="txtEdad" name="validateEdad">
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">Puesto Trabajo</label>
                                                    <input type="text" class="form-control" id="txtPuestoTrabajo" name="validatePuestoTrabajo">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Email</label>
                                                    <input type="text" class="form-control" id="txtEmail" name="validateEmail">
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="col">
                                                    <div class="form-group">
                                                        <label class="control-label">Dirección</label>
                                                        <input type="text" class="form-control" id="txtDireccion" name="validateDireccion">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="panel panel-bordered panel-info">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">MODO DE INGRESO</h3>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="form-group">
                                                                <select class="selectpicker" id="ddlModoIngreso" name="validateModoIngreso">
                                                                    <option value="4">ASINTOMÁTICO POSITIVO</option>
                                                                    <option value="2">SOSPECHOSO</option>
                                                                    <option value="1">SINTOMÁTICO</option>
                                                                    <option value="6">COVID CONFIRMADO SINTOMÁTICO</option>
                                                                    <option value="3">CONTACTO DIRECTO</option>
                                                                    <option value="5">REINGRESO</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row asintomatico-positivo">
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label class="control-label">Fecha</label>
                                                                <input type="text" class="form-control" id="dtpFechaExamenregistro">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label class="control-label">Tipo Examen</label>
                                                                <select id="ddl-TipoExamen-registro" class="selectpicker" data-width="80%">
                                                                    <option value="-1"> </option>
                                                                    <option value="1">Prueba Rápida</option>
                                                                    <option value="2">Molecular</option>
                                                                    <option value="3">Antígenos</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label class="control-label">Resultado</label>
                                                                <select id="ddl-ExamenResultado-registro" class="selectpicker" data-width="95%">
                                                                    <option value="-1"> </option>
                                                                    <option value="0">Negativo</option>
                                                                    <option value="1">No Válido</option>
                                                                    <option value="2">IgM Positivo</option>
                                                                    <option value="3">IgG Positivo</option>
                                                                    <option value="4">IgM e IgG Positivo</option>
                                                                    <option value="6">Positivo</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row contacto-directo">
                                                        <div class="col-sm-6">
                                                            <div class="form-group">
                                                                <label class="control-label">Nombre</label>
                                                                <input type="text" class="form-control" id="txtNombreContactoRegistro">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="form-group">
                                                                <label class="control-label">Tipo Contacto</label>
                                                                <select id="ddl-TipoContacto-registro" class="selectpicker" data-width="80%">
                                                                    <option value="-1"> </option>
                                                                    <option value="1">Familiar</option>
                                                                    <option value="2">Compañero</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">

                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Vía de Ingreso</label>
                                                    <select class="selectpicker" id="ddlViaIngreso" name="validateViaIngreso">
                                                        <option> </option>
                                                        <option value="1">TAMIZAJE</option>
                                                        <option value="2">GARITA</option>
                                                        <option value="3">ÁREA DE TRABAJO</option>
                                                        <option value="4">DOMICILIO</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Emp. Principal</label>
                                                    <select class="selectpicker" id="ddlEmpresaRegistro" name="validateEmpresaRegistro" data-width="90%">
                                                        @*<option> </option>
        <option value="1">BACKUS</option>
        <option value="2">AMBEV</option>
        <option value="3">TRANSPORTE 77</option>
        <option value="4">NAVIERA ORIENTE S.A.C.</option>
        <option value="5">BARBARIAN</option>
        <option value="6">PERU LNG</option>*@
                                                        <option value="0" selected>Seleccione...</option>

                                                        @foreach (var item in @ViewBag.EmpresasRegistro)
                                                        {

                                                            <option value="@item.EmpresaId">@item.EmpresaNombre</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Sede</label>
                                                    <select class="selectpicker" id="ddlSedeRegistro" name="validateEmpresaRegistro" data-width="90%">
                                                        <option> </option>

                                                      

                                                            @foreach (var item in @ViewBag.SEDESASIGNADAS)
                                                            {
                                                                <option value="@item.SedeId">@item.SedeNombre</option>
                                                            }

                                                    

                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Tipo de Empresa</label>
                                                    <select class="selectpicker" id="ddlTipoEmpresa" name="validateTipoEmpresa" data-width="80%">
                                                        <option> </option>
                                                        <option value="1">PROPIO</option>
                                                        <option value="2">REPARTO</option>
                                                        <option value="3">TERCEROS</option>
                                                    </select>
                                                </div>
                                            </div>



                                            <div class="col-sm-3">
                                                <div class="form-group">
                                                    <label class="control-label">Empleadora</label>
                                                    <input type="text" id="txtEmpleadora" class="form-control" value="">
                                                </div>
                                            </div>




                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Médico Asignado</label>
                                                    <select class="selectpicker" id="ddlMedicoVigilaId">
                                                        @foreach (var item in @ViewBag.MEDICOSVIGILA)
                                                        {
                                                            if (item.Propietario)
                                                            {
                                                                <option value="@item.Id" selected>@item.NombreUsuario</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@item.Id">@item.NombreUsuario</option>
                                                            }

                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group">
                                                    <label class="control-label">F.ingreso</label>
                                                    <input type="text" id="dtpFechaIngreso" class="form-control" placeholder="dd/mm/yyyy" readonly>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer text-right">
                                        <button class="btn btn-success" id="btnRegistrarTrabajador" type="submit">Registrar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!--===================================================-->
                    <!--End Block Styled Form -->
                </div>
            </div>
        </div>
    </div>
    <!--===================================================-->
    <!--End Default Bootstrap Modal-->
    <!--===================================================-->
    <!--End page content-->
    <!--Modal Edición de trabajador-->
    <!--===================================================-->
    <div class="modal fade"
         id="modal-editar-trabajador"
         role="dialog"
         tabindex="-1"
         aria-labelledby="modal-editar-trabajador"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--Modal header-->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="pci-cross pci-circle"></i>
                    </button>
                    <h4 class="modal-title">Edición de trabajador</h4>
                </div>
                <input type="hidden" id="trabajadorEdicionId" value="" />
                <!--Modal body-->
                <div class="modal-body">
                    <div class="panel panel-bordered-primary">
                        <div class="panel-body">
                            <form id="form-editar-trabajador">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">DNI</label>
                                                <input type="text" class="form-control" id="txtDniEdicion" name="validateDniEdicion">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Nombre Completo</label>
                                                <input type="text" class="form-control" id="txtNombreCompletoEdicion" name="validateNombreCompletoEdicion">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Apellido Paterno</label>
                                                <input type="text" class="form-control" id="txtApePaternoEdicion" name="validateApePaternoEdicion">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Apellido Materno</label>
                                                <input type="text" class="form-control" id="txtApeMaternoEdicion" name="validateApeMaternoEdicion">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Celular</label>
                                                <input type="text" class="form-control" id="txtCelularEdicion" name="validateCelularEdicion">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Telf. referencia</label>
                                                <input type="text" class="form-control" id="txtTelfReferenciaEdicion" name="validateTelfReferenciaEdicion">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Sexo</label>
                                                <select class="selectpicker" id="ddlSexoEdicion" data-width="90%">
                                                    <option value="MASCULINO">MASCULINO</option>
                                                    <option value="FEMENINO">FEMENINO</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Edad</label>
                                                <input type="text" class="form-control" id="txtEdadEdicion" name="validateEdadEdicion">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Puesto Trabajo</label>
                                                <input type="text" class="form-control" id="txtPuestoTrabajoEdicion" name="validatePuestoTrabajoEdicion">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Email</label>
                                                <input type="text" class="form-control" id="txtEmailEdicion" name="validateEmailEdicion">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="control-label">Dirección</label>
                                                    <input type="text" class="form-control" id="txtDireccionEdicion" name="validateDireccionEdicion">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Modo de ingreso</label>
                                                <select class="selectpicker" id="ddlModoIngresoEdicion" name="validateModoIngresoEdicion">
                                                    <option value="4">ASINTOMÁTICO POSITIVO</option>
                                                    <option value="2">SOSPECHOSO</option>
                                                    <option value="1">SINTOMÁTICO</option>
                                                    <option value="6">COVID CONFIRMADO SINTOMÁTICO</option>
                                                    <option value="3">CONTACTO DIRECTO</option>
                                                    <option value="5">REINGRESO</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Via ingreso de</label>
                                                <select class="selectpicker" id="ddlViaIngresoEdicion" name="validateViaIngresoEdicion">
                                                    <option> </option>
                                                    <option value="1">TAMIZAJE</option>
                                                    <option value="2">GARITA</option>
                                                    <option value="3">ÁREA DE TRABAJO</option>
                                                    <option value="4">DOMICILIO</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Empresa</label>
                                                <select class="selectpicker" id="ddlEmpresaRegistroEdicion" name="validateEmpresaRegistroEdicion" data-width="80%">
                                                    <option> </option>
                                                    <option value="1">BACKUS</option>
                                                    <option value="2">REPARTO</option>
                                                    <option value="3">TERCEROS</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Empleadora</label>
                                                <input type="text" id="txtEmpleadoraEdicion" class="form-control" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">Sede</label>
                                                <select class="selectpicker" id="ddlSedeRegistroEdicion" name="validateSedeRegistroEdicion" data-width="80%">
                                                    <option> </option>
                                                    @foreach (var item in @ViewBag.SEDESASIGNADAS)
                                                    {
                                                        <option value="@item.SedeId">@item.SedeNombre</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Médico Asignado</label>
                                                <select class="selectpicker" id="ddlMedicoVigilaIdEdicion">
                                                    @foreach (var item in @ViewBag.MEDICOSVIGILA)
                                                    {
                                                        if (item.Propietario)
                                                        {
                                                            <option value="@item.Id" selected>@item.NombreUsuario</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="@item.Id">@item.NombreUsuario</option>
                                                        }

                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer text-right">
                                    <button class="btn btn-success" id="btnEditarTrabajador" type="submit">Editar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--===================================================-->
    <!--End Default Bootstrap Modal-->
    <!--===================================================-->
    <!--End page content-->
    <!--Modal info altas-->
    <!--===================================================-->
    <div class="modal fade"
         id="modal-rangodefechas"
         role="dialog"
         tabindex="-1"
         aria-labelledby="modal-info-altas"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--Modal header-->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="pci-cross pci-circle"></i>
                    </button>
                    <h4 class="modal-title">Favor Seleccionar Rango de Fechas</h4>
                </div>

                <!--Modal body-->
                <div class="modal-body">
                    <form id="form-descarga">
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Fecha de Inicio</th>
                                            <th>Fecha de Fin</th>

                                        </tr>
                                        <tr>
                                            <th><input type="text" class="form-control fechaRFechaInicio" id="dtp-rFechaInicio" autocomplete="off"></th>
                                            <th><input type="text" class="form-control fechaRFin" id="dtp-rFechaFin" autocomplete="off"></th>

                                            <th><button class="btn btn-success" id="btnDescargartodoexcel">Descargar</button></th>
                                        </tr>


                                    </thead>

                                    <tbody id="table-altas">
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </form>
                </div>

            </div>

        </div>

    </div>
</div>
<!--===================================================-->
<!--End Default Bootstrap Modal-->

<div class="modal fade cargaEsperar" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered text-center" role="document">
        <div class="load6">
            <div class="loader"></div>
        </div>
    </div>
</div>


<!--datatables-->

<script src="~/Scripts/jquery-3.4.1.js"></script>

<script src="~/Scripts/jquery-ui.js"></script>
<script src="https://malsup.github.io/jquery.blockUI.js"></script>

<!-- This is highcharts -->
<script src="~/Scripts/Highcharts/highcharts.js"></script>
<script src="~/Scripts/Highcharts/modules/series-label.js"></script>
<script src="~/Scripts/Highcharts/modules/exporting.js"></script>
<script src="~/Scripts/Highcharts/modules/export-data.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">


<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<link rel= "stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">

@*<script src="//code.jquery.com/jquery-1.12.4.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>*@

<script>

    $(document).ready(function () {

        ObtenerCasosDiarios('');

        ObtenerAltas('');

        ObtenerSedes('');

        function viewAltaMedica(idTrabajador) {
            window.location.href = "/MonitoringWorker/ExportAltaMedica?id=" + idTrabajador;
        }



        function eliminarRegistro(idRegistro, trabajador) {

            console.log("TRABAJADOR", trabajador);

            bootbox.confirm("¿Está seguro de elimnar el registro de: " + trabajador + " ?", function (result) {


                if (result) {
                    console.log("ELIMINADO");
                    $.ajax({
                        type: "POST",
                        url: "/Home/EliminarRegistro",
                        data: { "idRegistro": idRegistro },
                        success: function (data) {
                            console.log("data", data);
                            window.location = "/Home/Index";
                        },
                        error: function (jqXHR, exception) {
                            alert("Ocurrió un error en la operación")
                        }
                    });
                } else {
                    $.niftyNoty({
                        type: 'danger',
                        icon: 'pli-cross icon-2x',
                        message: 'Se canceló la operación.',
                        container: 'floating',
                        timer: 3000
                    });
                };
            });
        }




        $("#table-Lista-Trabajadores").on("click", ".btn-ficha-alta", function () {

            viewAltaMedica($($(this).get(0)).attr('id').split('-')[3]);
        });

        $("#table-Lista-Trabajadores").on("click", ".btn-envia-alta", function () {
            var registroTrabajadorId = $($(this).get(0)).attr('id').split('-')[3];
            bootbox.confirm("¿Está seguro de volver a enviar Ficha de Alta?", function (result) {

                var datos = { "id": registroTrabajadorId };
                if (result) {
                    $.ajax({
                        type: "POST",
                        url: "/MonitoringWorker/ExportAltaMedica",
                        data: datos,
                        success: function (data) {
                            window.location = "/Home/Index";
                        },
                        error: function (jqXHR, exception) {
                            alert("Ocurrió un error en la operación")
                        }
                    });
                } else {
                    $.niftyNoty({
                        type: 'danger',
                        icon: 'pli-cross icon-2x',
                        message: 'Se canceló la operación.',
                        container: 'floating',
                        timer: 3000
                    });
                };
            });
        });


        $("#table-Lista-Trabajadores").on("click", ".btn-elimnar-registro", function () {
            var trabajador = $($(this).get(0)).parent().parent().find('td .btn-link').get(0).innerHTML;

            eliminarRegistro($($(this).get(0)).attr('id').split('-')[2], trabajador);
        });



        $("#form-descarga").submit(function (ev) { ev.preventDefault(); });




        $("#btnDescargartodoexcel").on('click', function () {

            let FechaInicio = $("#dtp-rFechaInicio").val();
            let FechaFin = $("#dtp-rFechaFin").val();
            var St = "sss";

            window.location.href = "/Home/ReporteExcelManual?cadena=" + St + "&FechaInicio=" + FechaInicio + "&FechaFin=" + FechaFin;

            //window.location.href = "/Home/ReporteExcelManual?cadena=" + 'sss' + "&FechaInicio=" + '01-07-2021' + "&FechaFin=" + '30-07-2021';


        });

        //$("#btnReporteAltaMedicaHoy").on('click', function () {
        //    window.location.href = "/Home/ReporteExcelAltasHoy?str=" + JSON.stringify("sss");
        //});

        $(".botonera").on("click", "button", function (e) {

            $(".botonera button").each(function (index, element) {
                $(element).removeClass("btn-warning").addClass("btn-default");

            });
            let nameOption = $(this).attr('name')
            $(this).addClass('btn-warning');

            var selected = $('#ddlEmpresaCodigo').find("option:selected");
            var arrSelected = [];
            var sedesNombres = []
            selected.each(function () {
                arrSelected.push($(this).val().split('-')[1]);
                sedesNombres.push($(this).get(0).innerText.split('-')[1]);
            });

            ActualizarTablaListaTrabajadores(arrSelected, nameOption);
            console.log("Mensaje de prueba");
        });

        $("#ddlModoIngreso").on("change", function () {
            //Limpiar controles
            $('#dtpFechaExamenregistro').val('');
            $('#ddl-TipoExamen-registro').val(-1); $('#ddl-TipoExamen-registro').selectpicker('refresh');
            $('#ddl-ExamenResultado-registro').val(-1); $('#ddl-ExamenResultado-registro').selectpicker('refresh');
            $('#txtNombreContactoRegistro').val('');
            $('#ddl-TipoContacto-registro').val(-1); $('#ddl-TipoContacto-registro').selectpicker('refresh');

            var valor = $("#ddlModoIngreso").val();
            if (valor == 4) {//Asintomático positivo
                $(".asintomatico-positivo").show();
                $(".contacto-directo").hide();
            } else if (valor == 3) {//contacto directo
                $(".asintomatico-positivo").hide();
                $(".contacto-directo").show();
            }
            else {
                $(".asintomatico-positivo").hide();
                $(".contacto-directo").hide();
            }
        });

        $("#btn-registro-manual").on('click', function () {
            $('div.disable').unblock();
        });

        $("#txt-buscar-trabajador-hc").autocomplete({
            minLength: 4,
            delay: 500,
            create: function () { $(this).val(""); },
            source: function (request, response) {

                $.ajax({
                    type: "GET",
                    url: "/Home/SearchTrabajador?filter=" + request.term,
                    dataType: 'json',
                    success: function (json) {
                        var array = json.map((res) => {
                            return { "label": res.NombresCompletosDoc, "value": res.Id }
                        });
                        response(array);

                        if (json.length == 0) {
                            $("#btn-registro-manual").prop('disabled', false);
                            $("#txtDni").prop("disabled", false);
                        } else {
                            $("#btn-registro-manual").prop('disabled', true);
                        }
                    }
                });
            },
            open: function () {
                $(this).autocomplete('widget').css('z-index', 10000);
                return false;
            },
            select: function (event, ui) {
                $(this).val(ui.item.label);
                $('div.disable').unblock();
                var dni = ui.item.label.split('-')[1];
                GetTrabajador(dni);
                $("#txtDni").val(dni);
                $("#txtDni").prop("disabled", true);
                $("#txt-buscar-trabajador-hc").prop("disabled", true);
                return false;
            }
        });

        $('#ddlEmpresaCodigo option').attr("selected", "selected");
        $('#ddlEmpresaCodigo').selectpicker('refresh');

        $("#ddlMes").on('change', function () {
            ObtenerSedes('');
        })

        $('#ddlEmpresaCodigo').on('change', function () {
            var selected = $(this).find("option:selected");
            var arrSelected = [];
            var sedesNombres = []
            selected.each(function () {
                arrSelected.push($(this).val().split('-')[1]);
                sedesNombres.push($(this).get(0).innerText.split('-')[1]);
            });

            ActualizarTablaListaTrabajadores(arrSelected, undefined);
            ObtenerCasosDiarios(arrSelected, sedesNombres);
            ObtenerAltas(arrSelected, sedesNombres);
            ObtenerSedes(arrSelected, 'AGOSTO');
        });


        $('#ddlEmpresaRegistro').on('change', function () {
            var empresaId = $('#ddlEmpresaRegistro').val();
            console.log(empresaId);
            $.ajax({
                type: "GET",
                url: "/Home/GetSedesEmpresaPrincipal?empresaId=" + empresaId,
                dataType: 'json',
                success: function (result) {
                    console.log(result);
                    var options = [], _options;
                    //var option;
                    for (var i = 0; i < result.length; i++) {
                        var option = "<option value='" + result[i].SedeId + "'>" + result[i].SedeNombre + "</option>";
                        options.push(option);
                    }
                    _options = options.join('');

                    //$('#UsersList').innerHTML = _options;
                    $('#ddlSedeRegistro').html(_options).selectpicker('refresh');
                }
            });
        });

        function ComboMedicoAsignado() {
            $.ajax({
                type: "GET",
                url: "/Home/ListarUsuarios",
                dataType: 'json',
                success: function (result) {
                    var content = "";

                    for (var i = 0; i < result.length; i++) {
                        if (result[i].Propietario) {
                            content += "<option value='" + result[i].Id + "'>" + result[i].NombreUsuario + "</option>";
                        } else {
                            content += "<option value='" + result[i].Id + "'>" + result[i].NombreUsuario + "</option>";
                        }
                    }

                    $("#ddlMedicoVigilaId").append(content);
                }

            });
        }

        function ObtenerSedes(sedesId) {
            var mesValue = $("#ddlMes").val();
            $.ajax({
                type: "GET",
                url: "/Dashboard/GraficoSedes?sedesId=" + sedesId + "&Mes=" + mesValue,
                dataType: 'json',
                success: function (result) {
                    GraficoSedes(result);
                }
            });
        }

        function ObtenerAltas(sedesId, sedesNombres) {
            $.ajax({
                type: "GET",
                url: "/Dashboard/GraficoAltas?sedesId=" + sedesId,
                dataType: 'json',
                success: function (result) {
                    GraficoAltas(result, sedesNombres);
                }
            });
        }

        function GraficoSedes(result) {
            var ejeX = result.map(function (value) {
                return value.Sede;
            })

            var asintomaticos = result.map(function (value) {
                return value.CasosAsintomaticos;
            });

            var sospechosos = result.map(function (value) {
                return value.CasosSospechosos;
            });

            var confirmados = result.map(function (value) {
                return value.CasosConfirmadoSintomatico;
            });

            Highcharts.chart('chart-sedes', {

                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Frecuencia de Casos Covid',
                    style: { "color": "#333333", "fontSize": "18px" }
                },
                subtitle: {
                    text: ''
                },
                xAxis: {
                    categories: ejeX,
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Trabajadores'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} trab.</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Asintomáticos(+)',
                    data: asintomaticos

                }, {
                    name: 'Sospechosos',
                    data: sospechosos

                }, {
                    name: 'Confirmado Sintomático',
                    data: confirmados

                }]

            });

        }

        function GraficoAltas(result, sedesNombres) {

            var ejeX = result.map(function (value) {
                return value.Dia;
            });

            var colores = [];
            for (var i = 0; i < result.length; i++) {
                colores.push(result[i].Tipo);
            }

            var datos = result.map(function (value) {
                return value.Numero;
            });

            Highcharts.chart('Chart-Altas', {

                title: {
                    text: 'Altas Dadas y Programadas',
                    style: { "color": "#333333", "fontSize": "18px" }
                },

                subtitle: {
                    text: ''
                },

                xAxis: {
                    categories: ejeX
                },

                colors: colores,

                series: [{
                    type: 'column',
                    colorByPoint: true,
                    data: datos,
                    showInLegend: false
                }]

            });

        }

        function ObtenerCasosDiarios(sedesId, sedesNombres) {
            $.ajax({
                type: "GET",
                url: "/Dashboard/GraficoCasosDiarios?sedesId=" + sedesId,
                dataType: 'json',
                success: function (result) {
                    GraficoCasosDiarios(result, sedesNombres);
                }
            });
        }

        function GraficoCasosDiarios(result, sedesNombres) {

            var ejeX = result.map(function (value) {
                return value.dia;
            })

            var asintomaticos = result.map(function (value) {
                return value.CasosDiariosAsintomaticos;
            });

            var sospechosos = result.map(function (value) {
                return value.CasosDiariosSospechosos;
            });

            var confirmados = result.map(function (value) {
                return value.CasosDiariosConfirmadoSintomatico;
            });

            Highcharts.chart('Chart-Diarios', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Casos Diarios',
                    style: { "color": "#333333", "fontSize": "18px" }
                },
                subtitle: {
                    text: ''
                },
                xAxis: {
                    categories: ejeX,
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Trabajadores'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} trab.</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Asintomáticos(+)',
                    data: asintomaticos

                }, {
                    name: 'Sospechosos',
                    data: sospechosos

                }, {
                    name: 'Confirmado Sintomático',
                    data: confirmados

                }]
            });

        }

        function ObtenerEmpresas() {
            $.ajax({
                type: "GET",
                url: "/Home/GetAllEmpresas",
                dataType: 'json',
                success: function (result) {
                    $("#ddlEmpresaRegistro").empty();
                    var content = "";
                    content += "<option>  </option>";
                    for (var i = 0; i < result.length; i++) {
                        content += "<option value='" + result[i].Id + "'>" + result[i].NombreEmpresa + "</option>";
                    }
                    $("#ddlEmpresaRegistro").append(content);
                }
            });
        }

        function GetTrabajador(dni) {
            $.ajax({
                type: "GET",
                url: "/Home/GetTrabajadorPorDNI?dni=" + dni,
                dataType: 'json',
                success: function (result) {
                    $("#txtNombreCompleto").val(result.Nombres);
                    $("#txtApePaterno").val(result.ApellidoPaterno);
                    $("#txtApeMaterno").val(result.ApellidoMaterno);
                    $("#txtDni").val(result.Dni);
                    $("#txtEdad").val(calcularEdad(moment(result.FechaNacimiento).format("yyyy/MM/DD")));
                    $("#txtPuestoTrabajo").val(result.Puesto);
                    $("#txtCelular").val("");
                    $("#txtTelfReferencia").val("");
                    $("#txtEmail").val(result.CorreoTrabajador);
                    $("#txtDireccion").val("");
                    $("#ddlSexo").val(result.Sexo);

                    $("#ddlEmpresaRegistro option:contains(" + result.NombreEmpresa + ")").attr("selected", true);
                    $('#ddlEmpresaRegistro').selectpicker('refresh');
                    $("#ddlEmpresaRegistro").attr("disabled", true);



                    $("#txtEmpleadora").val(result.EmpresaEmpleadora);


                    var codSede = $("#ddlSedeRegistro option:contains(" + result.Sede + ")").val();
                    $('#ddlSedeRegistro').val(codSede);
                    $('#ddlSedeRegistro').trigger("change");
                    $("#ddlSedeRegistro").attr("disabled", true);

                }
            });
        }

        function updateFootable() {
            var table = $("#table-Lista-Trabajadores");
            table.footable();


            //var paramTable = $('.footable');
            //paramTable.trigger('footable_initialize');

        }

        function ActualizarTablaListaTrabajadores(sedesId, option) {
            $('.cargaEsperar').modal('show');

            $.ajax({
                type: "GET",
                url: "/Home/ActualizarGrillaListaTrabajadores?sedesId=" + sedesId + "&option=" + option,
                dataType: 'json',
                success: function (result) {

                    var content = "";
                    for (var i = 0; i < result.length; i++) {
                        content += '<tr>';
                        content += '<td>' + result[i].Indice + '</td>';
                        if (result[i].Alerta) {
                            content += '<td><a href="/MonitoringWorker/RegisterMonitoring?id=' + result[i].RegistroTrabajadorId + '" class="btn-link nombre-trabajador">' + result[i].NombreCompleto + '<span class="parpadea text"> ¡Alta!</span></a></td>';
                        } else {
                            content += '<td><a href="/MonitoringWorker/RegisterMonitoring?id=' + result[i].RegistroTrabajadorId + '" class="btn-link nombre-trabajador">' + result[i].NombreCompleto + '<span class=""></span></a></td>';
                        }
                        content += '<td>' + result[i].Dni + '</td>';
                        content += '<td>' + result[i].Empresa + '</td>';
                        content += '<td>' + result[i].Sede + '</td>';
                        content += '<td><span class="text-muted">' + result[i].Edad + '</span></td>';
                        content += '<td>' + result[i].FechaIngreso + '</td>';
                        content += '<td>' + result[i].FechaAlta + '</td>';
                        content += '<td class="text-center text-uppercase">' + result[i].ModoIngreso + '</td>';
                        content += '<td class="text-center">' + result[i].EstadoDiario + '</td>';
                        content += '<td class="text-center">' + result[i].MedicoVigila + '</td>';
                        content += '<td class="text-center">';
                        if (result[i].EstadoDiario === "ALTA EPIDEMIOLÓGICA") {
                            content += '<div id="btn-ficha-alta-' + result[i].RegistroTrabajadorId + '" class="label label-table label-warning cursor-pointer btn-ficha-alta" ><i class="btn-label demo-pli-download-from-cloud"></i>Ver Alta</div>';
                            content += '<div id="btn-envia-alta-' + result[i].RegistroTrabajadorId + '" class="label label-table label-success cursor-pointer btn-ficha-alta" ><i class="btn-label demo-pli-download-from-cloud"></i>Enviar Alta</div>';
                        } else {
                            content += '<div id="btn-editar-' + result[i].RegistroTrabajadorId + '" class="label label-table label-success cursor-pointer" data-toggle="modal" data-target="#modal-editar-trabajador">Editar registro</div>';
                            content += '<div id="btn-eliminar-' + result[i].RegistroTrabajadorId + '" class="label label-table label-danger cursor-pointer btn-elimnar-registro">Eliminar</div>';
                        }

                        content += '</td>';
                        content += '</tr>';
                    }
                    $("tbody").empty();
                    $("tbody").append(content);
                    updateFootable();

                    $('.cargaEsperar').modal('hide');
                }
            });
        }

        $("#form-editar-trabajador").submit(function (ev) { ev.preventDefault(); });

        $("#btnEditarTrabajador").on("click", function () {
            var bootstrapValidator = $("#form-editar-trabajador").data('bootstrapValidator');
            bootstrapValidator.validate();
            if (bootstrapValidator.isValid()) {

                bootbox.confirm("¿Está seguro de editar trabajador?", function (result) {

                    var datos = poblarEntidadEditarTrabajador();
                    if (result) {
                        $.ajax({
                            type: "POST",
                            url: "/Home/EditarTrabajador",
                            data: datos,
                            success: function (data) {
                                window.location = "/Home/Index";
                            },
                            error: function (jqXHR, exception) {
                                alert("Ocurrió un error en la operación")
                            }
                        });
                    } else {
                        $.niftyNoty({
                            type: 'danger',
                            icon: 'pli-cross icon-2x',
                            message: 'Se canceló la operación.',
                            container: 'floating',
                            timer: 3000
                        });
                    };
                });
            }
            else {
                console.log("FAIL REGISTRO");
                return;
            }
        });

        $("#form-registrar-trabajador").submit(function (ev) { ev.preventDefault(); });

        function ValidarModoIngreso() {
            var value = $("#ddlModoIngreso").val();
            if (value == 3) {//contacto directo

                var nombreContacto = $("#txtNombreContactoRegistro").val();
                var TipoContacto = $("#ddl-TipoContacto-registro").val();

                if (nombreContacto == undefined || nombreContacto == "") {
                    bootbox.alert("<span class='mensajeAlerta'>debe ingresar nombre contacto</span>");
                    return false;
                }

                if (TipoContacto == undefined || TipoContacto == "-1") {
                    bootbox.alert("<span class='mensajeAlerta'>debe ingresar Tipo contacto</span>");
                    return false;
                }

                return true;

            } else if (value == 4) {//Asintomático positivo

                var valorfecha = $("#dtpFechaExamenregistro").val();;
                var valorTipoExamen = $("#ddl-TipoExamen-registro").val();
                var valorResultadoExamen = $("#ddl-ExamenResultado-registro").val();

                if (valorfecha == undefined || valorfecha == "") {
                    bootbox.alert("<span class='mensajeAlerta'>debe ingresar fecha de examen</span>");
                    return false;
                }

                if (valorTipoExamen == undefined || valorTipoExamen == "-1") {
                    bootbox.alert("<span class='mensajeAlerta'>debe ingresar tipo de examen</span>");
                    return false;
                }

                if (valorResultadoExamen == undefined || valorResultadoExamen == "-1") {
                    bootbox.alert("<span class='mensajeAlerta'>debe ingresar tipo de resultado de examen</span>");
                    return false;
                }

            }
            return true;
        }

        //$("#btnRegistrarTrabajador").on("click", function () {

        //    if (!ValidarModoIngreso()) return false;
        //    var bootstrapValidator = $("#form-registrar-trabajador").data('bootstrapValidator');
        //    bootstrapValidator.validate();
        //    if (bootstrapValidator.isValid()) {

        //        bootbox.confirm("¿Está seguro de registrar trabajador?", function (result) {

        //            var datos = poblarEntidadRegistroTrabajador();
        //            console.log("DATOS", datos);
        //            if (result) {
        //                $.ajax({
        //                    type: "POST",
        //                    url: "/Home/RegistrarTrabajador",
        //                    data: datos,
        //                    success: function (data) {
        //                        console.log("DATA", data);
        //                        if (data == "") {
        //                            alert("El trabajador ya ha sido registrado");
        //                        } else {
        //                            window.location = "/Home/Index"
        //                        }
        //                    },
        //                    error: function (jqXHR, exception) {
        //                        alert("Ocurrió un error en la operación")
        //                    }
        //                });
        //            } else {
        //                $.niftyNoty({
        //                    type: 'danger',
        //                    icon: 'pli-cross icon-2x',
        //                    message: 'Se canceló la operación.',
        //                    container: 'floating',
        //                    timer: 3000
        //                });
        //            };
        //        });
        //    }
        //    else {
        //        console.log("FAIL REGISTRO");
        //        return;
        //    }
        //});

        $("#btnRegistrarTrabajador").on("click", function () {

            if (!ValidarModoIngreso()) return false;
            var bootstrapValidator = $("#form-registrar-trabajador").data('bootstrapValidator');
            bootstrapValidator.validate();
            if (bootstrapValidator.isValid()) {

                bootbox.confirm("¿Está seguro de registrar trabajador?", function (result) {

                    var datos = poblarEntidadRegistroTrabajador();
                    console.log("DATOS", datos);
                    if (result) {
                        $.ajax({
                            type: "POST",
                            url: "/Home/RegistrarTrabajador",
                            data: datos,
                            success: function (data) {

                                console.log("DATA", data);
                                if (data == "DNI") {
                                    alert("El trabajador ya ha sido registrado");
                                }
                                else if (data == "NOM") {

                                    bootbox.confirm("El nombre del trabajador ya existe con otro número de DNI. Sí lo registra sería un homónimo ¿Aún así desea registrarlo?", function (result2) {
                                        if (result2) {
                                            datos.ConfirmarDuplicidadNombre = true;
                                            $.ajax({
                                                type: "POST",
                                                url: "/Home/RegistrarTrabajador",
                                                data: datos,
                                                success: function (data) {
                                                    window.location = "/Home/Index"
                                                },
                                                error: function (jqXHR, exception) {
                                                    alert("Ocurrió un error en la operación")
                                                }
                                            });
                                        }
                                        else {
                                            $.niftyNoty({
                                                type: 'danger',
                                                icon: 'pli-cross icon-2x',
                                                message: 'Se canceló la operación.',
                                                container: 'floating',
                                                timer: 3000
                                            });
                                        }
                                    });
                                }
                                else {
                                    window.location = "/Home/Index"
                                }
                            },
                            error: function (jqXHR, exception) {
                                alert("Ocurrió un error en la operación")
                            }
                        });
                    } else {
                        $.niftyNoty({
                            type: 'danger',
                            icon: 'pli-cross icon-2x',
                            message: 'Se canceló la operación.',
                            container: 'floating',
                            timer: 3000
                        });
                    };
                });
            }
            else {
                console.log("FAIL REGISTRO");
                return;
            }
        });


        $('#modal-registrar-trabajador')
            .on('shown.bs.modal', function () {
                $("#txt-buscar-trabajador-hc").prop("disabled", false);
                $("#btn-registro-manual").prop('disabled', true);
                $("#txt-buscar-trabajador-hc").val('');
                $("#dtpFechaIngreso").val(moment(Date.now()).format("DD/MM/yyyy"));
                $('.panel-buscardor-trabajador').find('[name="buscar-trabajador-hc"]').focus();
                $('div.disable').block({ message: null });

                $(".asintomatico-positivo").show();
                $(".contacto-directo").hide();

                ComboMedicoAsignado();
                PermisoParaRegistrarTrabajador();
            })
            .on('hidden.bs.modal', function () {
                $('#form-registrar-trabajador').bootstrapValidator('resetForm', true);
            });

        $('#modal-info-altas')
            .on('shown.bs.modal', function () {

                TablaAltas();

            })
            .on('hidden.bs.modal', function () {

            });

        $('#modal-editar-trabajador')
            .on('shown.bs.modal', function (e) {
                $('.panel-buscardor-trabajador').find('[name="buscar-trabajador-hc"]').focus();

                var idTrabajador = $(e.relatedTarget).attr('id').split('-')[2];
                $("#trabajadorEdicionId").val(idTrabajador);
                GetTrabajadorForEdicion(idTrabajador);
            })
            .on('hidden.bs.modal', function () {
                $('#form-editar-trabajador').bootstrapValidator('resetForm', true);
            });

        function GetTrabajadorForEdicion(id) {
            $.ajax({
                type: "GET",
                url: "/Home/GetTrabajador?id=" + id,
                dataType: 'json',
                success: function (result) {
                    console.log(result);
                    $("#ddlModoIngresoEdicion").val(result.ModoIngreso);
                    $("#ddlViaIngresoEdicion").val(result.ViaIngreso);
                    $("#txtNombreCompletoEdicion").val(result.NombreCompleto);
                    $("#txtApePaternoEdicion").val(result.ApePaterno);
                    $("#txtApeMaternoEdicion").val(result.ApeMaterno);
                    $("#txtDniEdicion").val(result.Dni);
                    $("#txtEdadEdicion").val(result.Edad);
                    $("#ddlSexoEdicion").val(result.Sexo);
                    $("#txtPuestoTrabajoEdicion").val(result.PuestoTrabajo);
                    $("#txtCelularEdicion").val(result.Celular);
                    $("#txtTelfReferenciaEdicion").val(result.TelfReferencia);
                    $("#txtEmailEdicion").val(result.Email);
                    $("#txtDireccionEdicion").val(result.Direccion);
                    $("#ddlEmpresaRegistroEdicion").val(result.EmpresaId);
                    $("#ddlSedeRegistroEdicion").val(result.SedeId);
                    $("#txtEmpleadoraEdicion").val(result.Empleadora);
                    $("#ddlMedicoVigilaIdEdicion").val(result.MedicoVigilaId);

                    $("#ddlModoIngresoEdicion").selectpicker('refresh');
                    $('#ddlViaIngresoEdicion').selectpicker('refresh');
                    $('#ddlSexoEdicion').selectpicker('refresh');
                    $("#ddlEmpresaRegistroEdicion").selectpicker('refresh');
                    $('#ddlSedeRegistroEdicion').selectpicker('refresh');
                    $('#ddlMedicoVigilaIdEdicion').selectpicker('refresh');

                }
            });
        }

        function PermisoParaRegistrarTrabajador() {

            $.ajax({
                type: "GET",
                url: "/Home/PermisoRegistrarTrabajador",
                dataType: 'json',
                success: function (result) {
                    if (result) {
                        $("#txt-buscar-trabajador-hc").prop('readonly', false);
                        //
                        $("#msg-registro").empty();
                    } else {
                        $("#txt-buscar-trabajador-hc").prop('readonly', true);
                        var mensaje = "<span class='label label-danger'>ACCESO DENEGADO PARA REGISTRAR TRABAJADOR</span>";
                        $("#msg-registro").append(mensaje);
                    }
                }
            });
        }

        function poblarEntidadRegistroTrabajador() {
            return objData = {
                "ModoIngreso": $("#ddlModoIngreso").val(),

                "FechaExamen": $("#dtpFechaExamenregistro").val(),
                "TipoExamen": $("#ddl-TipoExamen-registro").val(),
                "ResultadoExamen": $("#ddl-ExamenResultado-registro").val(),
                "NombreContacto": $("#txtNombreContactoRegistro").val(),
                "TipoContacto": $("#ddl-TipoContacto-registro").val(),

                "ViaIngreso": $("#ddlViaIngreso").val(),
                "NombreCompleto": $("#txtNombreCompleto").val(),
                "ApePaterno": $("#txtApePaterno").val(),
                "ApeMaterno": $("#txtApeMaterno").val(),
                "Dni": $("#txtDni").val(),
                "Edad": $("#txtEdad").val(),
                "Sexo": $("#ddlSexo").val(),
                "PuestoTrabajo": $("#txtPuestoTrabajo").val(),
                "Celular": $("#txtCelular").val(),
                "TelfReferencia": $("#txtTelfReferencia").val(),
                "Email": $("#txtEmail").val(),
                "Direccion": $("#txtDireccion").val(),
                "EmpresaId": $("#ddlEmpresaRegistro").val(),
                "SedeId": $("#ddlSedeRegistro").val(),
                "Empleadora": $("#txtEmpleadora").val(),
                "MedicoVigilaId": $("#ddlMedicoVigilaId").val(),
                "TipoEmpresaId": $("#ddlTipoEmpresa").val(),

            }
        }

        function poblarEntidadEditarTrabajador() {
            return objData = {
                "Id": $("#trabajadorEdicionId").val(),
                "ModoIngreso": $("#ddlModoIngresoEdicion").val(),
                "ViaIngreso": $("#ddlViaIngresoEdicion").val(),
                "NombreCompleto": $("#txtNombreCompletoEdicion").val(),
                "ApePaterno": $("#txtApePaternoEdicion").val(),
                "ApeMaterno": $("#txtApeMaternoEdicion").val(),
                "Dni": $("#txtDniEdicion").val(),
                "Edad": $("#txtEdadEdicion").val(),
                "Sexo": $("#ddlSexoEdicion").val(),
                "PuestoTrabajo": $("#txtPuestoTrabajoEdicion").val(),
                "Celular": $("#txtCelularEdicion").val(),
                "TelfReferencia": $("#txtTelfReferenciaEdicion").val(),
                "Email": $("#txtEmailEdicion").val(),
                "Direccion": $("#txtDireccionEdicion").val(),
                "EmpresaId": $("#ddlEmpresaRegistroEdicion").val(),
                "SedeId": $("#ddlSedeRegistroEdicion").val(),
                "Empleadora": $("#txtEmpleadoraEdicion").val(),
                "MedicoVigilaId": $("#ddlMedicoVigilaIdEdicion").val(),
                "TipoEmpresaId": $("#ddlTipoEmpresa").val(),
            }
        }

        function TablaAltas() {
            let codigoEmpresa = $('#ddlEmpresaCodigo').val();

            $.ajax({
                type: "GET",
                url: "/Home/getAltas?Codigo=" + parseInt(codigoEmpresa),
                dataType: 'json',
                success: function (result) {
                    $("#table-altas").empty();
                    var content = "";
                    for (var i = 0; i < result.length; i++) {
                        content += "<tr>";
                        content += "<td>" + result[i].Trabajador + " días</td>";
                        content += "<td>" + result[i].NroSeguimientos + " días </td> ";
                        content += "<td>" + result[i].NroSinSintomas + " días</td> ";
                        content += "<td>" + result[i].NroConSintomas + " días</td> ";
                        content += "<td class='cursor-pointer'> Alta</td > ";
                        content += "</tr> ";
                    }

                    $("#table-altas").append(content);
                }
            });
        }
    })

    $(document).on('nifty.ready', function () {
        $('#dtpInicioSintomas').mask('99/99/9999');
        $('#dtpUltimoDiaTrabajo').mask('99/99/9999');

        $("#dtpFechaExamenregistro").datepicker({ autoclose: true, format: 'dd/mm/yyyy' })

        $('#input-search').on('input', function (e) {
            //e.preventDefault();
            //console.log($(this).val());
            //table.trigger('footable_filter', { filter: $(this).val() });
        });

        $('#button-search').on('click', function (e) {
            var filter = $('#input-search').val();
            console.log("FILTER", filter);
            table.trigger('footable_filter', { filter: filter });

        });

        var table = $("#table-Lista-Trabajadores");
        table.footable();


        $('#btnSeguimientoTotales').on('click', function (e) {

            var table = $("#table-Lista-Trabajadores");
            table.footable();

        });


        var faIcon = {
            valid: 'fa fa-check-circle fa-lg text-success',
            invalid: 'fa fa-times-circle fa-lg',
            validating: 'fa fa-refresh'
        }

        $('#form-registrar-trabajador').bootstrapValidator({
            excluded: ':disabled',
            feedbackIcons: faIcon,
            fields: {

                validateModoIngreso: {
                    validators: {
                        notEmpty: {
                            message: 'El INGRESO POR es requerido'
                        }
                    }
                },
                validateViaIngreso: {
                    validators: {
                        notEmpty: {
                            message: 'El VÍA INGRESO es requerido'
                        }
                    }
                },
                validateNombreCompleto: {
                    validators: {
                        notEmpty: {
                            message: 'El NOMBRE COMPLETO es requerido'
                        },
                        stringLength: {
                            min: 3,
                            max: 40,
                            message: 'El NOMBRE COMPLETO debe tener entre 10 y 100 caracteres'
                        },
                    }
                },
                validateApePaterno: {
                    validators: {
                        notEmpty: {
                            message: 'El APELLIDO PATERNO es requerido'
                        },
                        stringLength: {
                            min: 3,
                            max: 40,
                            message: 'El APELLIDO PATERNO debe tener entre 10 y 100 caracteres'
                        },
                    }
                },
                validateApeMaterno: {
                    validators: {
                        notEmpty: {
                            message: 'El APELLIDO MATERNO es requerido'
                        },
                        stringLength: {
                            min: 3,
                            max: 40,
                            message: 'El APELLIDO MATERNO debe tener entre 10 y 100 caracteres'
                        },
                    }
                },
                validateDni: {
                    validators: {
                        notEmpty: {
                            message: 'El DNI es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 12,
                            message: 'El DNI debe tener entre 8 y 12 caracteres'
                        },
                    }
                },
                validateEdad: {
                    validators: {
                        inclusive: true,
                        notEmpty: {
                            message: 'La EDAD es requerida'
                        },
                        integer: {
                            message: 'La EDAD no es un número'
                        },
                        between: {
                            min: 18,
                            max: 100,
                            message: 'La edad debe estar entre 18 y 100 años'
                        }
                    }
                },
                validatePuestoTrabajo: {
                    validators: {
                        notEmpty: {
                            message: 'El PUESTO DE TRABAJO es requerido'
                        },
                        stringLength: {
                            min: 4,
                            max: 200,
                            message: 'El PUESTO DE TRABAJO debe tener entre 8 y 200 caracteres'
                        },
                    }
                },
                validateCelular: {
                    validators: {
                        notEmpty: {
                            message: 'El CELULAR es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 20,
                            message: 'El CELULAR debe tener entre 8 y 20 caracteres'
                        },
                    }
                },
                validateTelfReferencia: {
                    validators: {
                        notEmpty: {
                            message: 'El TELEF.REFERENCIA es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 20,
                            message: 'El TELEF.REFERENCIA debe tener entre 8 y 20 caracteres'
                        },
                    }
                },
                validateEmail: {
                    validators: {
                        notEmpty: {
                            message: 'El EMAIL no es requerido'
                        },
                        emailAddress: {
                            message: 'El EMAIL no es válido'
                        }
                    }
                },
                validateDireccion: {
                    validators: {
                        notEmpty: {
                            message: 'La DIRECCIÓN es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 200,
                            message: 'La DIRECCIÓN debe tener entre 8 y 200 caracteres'
                        },
                    }
                },
                validateEmpresaRegistro: {
                    validators: {
                        notEmpty: {
                            message: 'Empresa Sede es requerido'
                        }
                    }
                }
            }
        }).on('success.field.bv', function (e, data) {
            var $parent = data.element.parents('.form-group');

            // Remove the has-success class
            $parent.removeClass('has-success');
        });

        $('#form-editar-trabajador').bootstrapValidator({
            excluded: ':disabled',
            feedbackIcons: faIcon,
            fields: {

                validateModoIngresoEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El INGRESO POR es requerido'
                        }
                    }
                },
                validateViaIngresoEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'LA VÍA DE INGRESO es requerido'
                        }
                    }
                },
                validateNombreCompletoEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El NOMBRE COMPLETO es requerido'
                        },
                        stringLength: {
                            min: 3,
                            max: 40,
                            message: 'El NOMBRE COMPLETO debe tener entre 10 y 100 caracteres'
                        },
                    }
                },
                validateApePaternoEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El APELLIDO PATERNO es requerido'
                        },
                        stringLength: {
                            min: 3,
                            max: 40,
                            message: 'El APELLIDO PATERNO debe tener entre 10 y 100 caracteres'
                        },
                    }
                },
                validateApeMaternoEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El APELLIDO MATERNO es requerido'
                        },
                        stringLength: {
                            min: 3,
                            max: 40,
                            message: 'El APELLIDO MATERNO debe tener entre 10 y 100 caracteres'
                        },
                    }
                },
                validateDniEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El DNI es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 12,
                            message: 'El DNI debe tener entre 8 y 12 caracteres'
                        },
                    }
                },
                validateEdadEdicion: {
                    validators: {
                        inclusive: true,
                        notEmpty: {
                            message: 'La EDAD es requerida'
                        },
                        integer: {
                            message: 'La EDAD no es un número'
                        },
                        between: {
                            min: 18,
                            max: 100,
                            message: 'La edad debe estar entre 18 y 100 años'
                        }
                    }
                },
                validatePuestoTrabajoEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El PUESTO DE TRABAJO es requerido'
                        },
                        stringLength: {
                            min: 4,
                            max: 200,
                            message: 'El PUESTO DE TRABAJO debe tener entre 8 y 200 caracteres'
                        },
                    }
                },
                validateCelularEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El CELULAR es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 20,
                            message: 'El CELULAR debe tener entre 8 y 20 caracteres'
                        },
                    }
                },
                validateTelfReferenciaEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El TELEF.REFERENCIA es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 20,
                            message: 'El TELEF.EMERGENCIA debe tener entre 8 y 20 caracteres'
                        },
                    }
                },
                validateEmailEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'El EMAIL no es requerido'
                        },
                        emailAddress: {
                            message: 'El EMAIL no es válido'
                        }
                    }
                },
                validateDireccionEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'La DIRECCIÓN es requerido'
                        },
                        stringLength: {
                            min: 8,
                            max: 200,
                            message: 'La DIRECCIÓN debe tener entre 8 y 200 caracteres'
                        },
                    }
                },
                validateEmpresaRegistroEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'Empresa Sede es requerido'
                        }
                    }
                },
                validateSedeRegistroEdicion: {
                    validators: {
                        notEmpty: {
                            message: 'Sede es requerido'
                        }
                    }
                }
            }
        }).on('success.field.bv', function (e, data) {
            var $parent = data.element.parents('.form-group');

            // Remove the has-success class
            $parent.removeClass('has-success');
        });

    })



    $(".fechaRFechaInicio").datepicker({ autoclose: true, dateFormat: 'dd/mm/yy' });
    var faIcon = {
        valid: 'fa fa-check-circle fa-lg text-success',
        invalid: 'fa fa-times-circle fa-lg',
        validating: 'fa fa-refresh'
    }

    $(".fechaRFin").datepicker({ autoclose: true, dateFormat: 'dd/mm/yy' });
    var faIcon = {
        valid: 'fa fa-check-circle fa-lg text-success',
        invalid: 'fa fa-times-circle fa-lg',
        validating: 'fa fa-refresh'
    }



    //CODIGO PARA ENVIAR LAS VARIABLES DE CONSULTA PARA LA DESCARGA DEL EXCEL ACUMULADO - Saul Ramos Vega  20072021

    //function checkFluencyDESCARGA() {
    //    //    if ($("#dtp-rFechaInicio").val() == "") {
    //    //  alert("Fecha de Inicio es requerido");
    //    //    return;
    //    //}
    //    //////}
    //    let FechaInicio = $("#dtp-rFechaInicio").val();
    //    let FechaFin = $("#dtp-rFechaFin").val();
    //    var saul = "sss";
    //    //let trabajadorId = $("#txtRegistroTrabajadoId").val();

    //    var datos = { "FechaInicio": FechaInicio, "FechaFin": FechaFin, "saul": saul };




    //    ////url: "/Home/ReporteExcelManual?str=" + JSON.stringify("sss"),
    //    //    window.location.href = "/Home/ReporteExcelManual?str=" + JSON.stringify("sss",FechaInicio,FechaFin);


    //    $.ajax({

    //        type: "POST",
    //        url: "/Home/ReporteExcelManual",
    //        data: datos,
    //        success: function (data) {
    //            $("#modal-rangodefechas").modal("hide");
    //            //tablaExamenes();
    //            if (!data) {
    //                alert("Acceso denegado");
    //            } else {
    //                //tablaExamenes();
    //                //ActualizarLineaTiempo();

    //               // window.location.href = "/Home/ReporteExcelManual?str=" + JSON.stringify("sss");
    //                //window.location = "/Home/Index"
    //            }

    //        },
    //        error: function (jqxhr, exception) {
    //            alert("ocurrió un error en la operación")
    //        }
    //    });
    //}



    ////js/datatable.js
    //$(document).ready(function () {
    //    $('#table-Lista-Trabajadores').DataTable({
    //        "columnDefs": [{
    //            "targets": 0
    //        }],
    //        language: {
    //            "sProcessing": "Procesando...",
    //            "sLengthMenu": "Mostrar _MENU_ resultados",
    //            "sZeroRecords": "No se encontraron resultados",
    //            "sEmptyTable": "Ningún dato disponible en esta tabla",
    //            "sInfo": "Mostrando resultados _START_-_END_ de  _TOTAL_",
    //            "sInfoEmpty": "Mostrando resultados del 0 al 0 de un total de 0 registros",
    //            "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
    //            "sSearch": "Buscar:",
    //            "sLoadingRecords": "Cargando...",
    //            "oPaginate": {
    //                "sFirst": "Primero",
    //                "sLast": "Último",
    //                "sNext": "Siguiente",
    //                "sPrevious": "Anterior"


    //            },
    //        }
    //    });
    //});

    $(document).ready(function () {
        $('#table-Lista-Trabajadores').DataTable();
    });



</script>
